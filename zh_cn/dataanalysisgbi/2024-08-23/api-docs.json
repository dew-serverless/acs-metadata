{"version":"1.0","info":{"style":"ROA","product":"DataAnalysisGBI","version":"2024-08-23"},"directories":[{"id":199317,"title":"智能问数接口","type":"directory","children":["RunDataAnalysis"]}],"components":{"schemas":{}},"apis":{"RunDataAnalysis":{"summary":"析言为您提供了与官方页面对话效果相同的open api接口，只需传入workspaceId以及query等相关信息，即可对您已经创建好的业务空间进行问答和数据分析。","path":"/{workspaceId}/gbi/runDataAnalysis","methods":["post"],"schemes":["https","sse"],"security":[{"AK":[]}],"consumes":[],"operationType":"read","deprecated":false,"systemTags":{"operationType":"none","riskType":"none","chargeType":"free","abilityTreeNodes":["FEATUREsfmXG6QUJ"],"tenantRelevance":"tenant"},"parameters":[{"name":"workspaceId","in":"path","schema":{"description":"当前请求所使用的百炼业务空间id","type":"string","required":true,"example":"llm-2v3934xtp49esw64\n"}},{"name":"body","in":"body","style":"json","schema":{"description":"请求体参数","type":"object","properties":{"specificationType":{"description":"当前请求指定使用的版本信息，不填时使用默认业务空间版本","type":"string","required":false,"enumValueTitles":{"STANDARD_TURBO":"标准版turbo","STANDARD_MIX":"标准版mix","CUSTOMIZATION":"定制版turbo"},"example":"STANDARD_MIX"},"generateSqlOnly":{"description":"当前请求只生成并返回sql，不会执行","type":"boolean","required":false,"example":"true"},"query":{"description":"用户输入的query","type":"string","required":true,"example":"请问销量前十的产品有哪些"},"sessionId":{"description":"消息会话ID，服务窗回调消息返回的会话ID。","type":"string","required":false,"example":"sessionID"}},"required":false}}],"responses":{"200":{"schema":{"title":"Schema of Response","description":"Schema of Response","type":"object","properties":{"data":{"description":"返回信息","type":"object","properties":{"errorMessage":{"description":"错误信息","type":"string","example":"Access was denied, message: No such namespace namespaces/tech-scp-chain7."},"event":{"description":"事件类型","type":"string","enumValueTitles":{"result":"result","evidence":"evidence","sql_part":"sql_part","sql_data":"sql_data","selector":"selector","rewrite":"rewrite","sql":"sql"},"example":"rewrite"},"evidence":{"description":"所用到的辅助模型推理的信息","type":"string","example":"今年是2024年"},"requestId":{"description":"当前本次请求的id","type":"string","example":"DA2578F7-88A5-5D6E-9305-33E724E97D60"},"rewrite":{"description":"改写后的用户输入","type":"string","example":"查询全部关键字数据，并以饼图形式展示"},"selector":{"description":"这次对话，召回了哪些表以用于sql的生成","type":"array","items":{"description":"召回的具体的表的名字","type":"string","example":"table_name1"}},"sessionId":{"description":"对话ID","type":"string","example":"sessionid1"},"sql":{"description":"当前对话生成的SQL语句","type":"string","example":"select p.product_id, p.product_name, sum(o.quantity) as total_sales from products p join orders o on p.product_id = o.product_id where o.order_date between '2022-10-22' and '2024-10-22' group by p.product_id, p.product_name having total_sales > 5"},"sqlData":{"description":"sql执行所返回的结构化内容","type":"object","properties":{"column":{"description":"sql执行结果中，查询的具体的字段名字","type":"array","items":{"description":"具体的字段名字内容","type":"string","example":"product"}},"data":{"description":"sql执行后获取的结构化数据，可能是多条","type":"array","items":{"description":"sql执行后所查询到的结构化数据的一条内容","type":"object","example":"{\n                    \"product_id\": \"29\",\n                    \"total_sales\": \"63\",\n                    \"product_name\": \"1L迷你电热水壶\"\n                }"}}}},"sqlError":{"description":"当任务执行失败时，此字段会报错导致任务失败的原因","type":"string","example":"Can not issue data manipulation statements with executeQuery()"},"visualization":{"description":"用于可视化模块展示所需要的信息","type":"object","properties":{"data":{"description":"用于可视化模块展示的结构化信息","type":"object","properties":{"plotType":{"description":"可视化图表展示的类型","type":"string","enumValueTitles":{"bar":"柱状图","line":"折线图","pie":"饼状图"},"example":"bar"},"xAxis":{"description":"可视化图表中x轴的内容","type":"array","items":{"description":"具体某一个x轴所展示的字段","type":"string","example":"product_name"}},"yAxis":{"description":"可视化图表中y轴的内容","type":"array","items":{"description":"具体某一个y轴所展示的字段","type":"string","example":"total_sales"}}}},"text":{"description":"对于sql执行结果的分析总结","type":"string","example":"查询结果显示，在过去两年中销量超过5的所有产品包括：2L大容量空气炸锅销售了109件，青春版运动手环销售了119件，2L大容量全自动豆浆机销售了106件，无线蓝牙耳机快充版销售了84件，2L大容量便携式榨汁机销售了136件，青春版智能手表销售了104件，挂壁式护眼台灯销售了102件，P30手机8+256G销售了83件，2L大容量电热水壶销售了84件，男士电动化妆刷套装销售了197件，旅行箱销售了82件，手链销售了101件，项链销售了84件，头饰发链销售了89件，腕表销售了98件，戒指销售了157件，真皮皮包销售了136件，风衣大衣销售了76件，运动旅行包销售了91件，丝巾销售了265件，1L迷你空气炸锅销售了85件，豪华款运动手环销售了132件，1L迷你全自动豆浆机销售了81件，豪华版无线蓝牙耳机（绿色）销售了122件，1L迷你便携式榨汁机销售了76件，豪华款智能手表销售了76件，粘贴式护眼台灯销售了109件，M60手机16+512G销售了109件，1L迷你电热水壶销售了63件，女士电动化妆刷套装销售了158件。"}}}}}}}}},"staticInfo":{"returnType":"synchronous"},"responseDemo":"[{\"errorExample\":\"\",\"example\":\"{\\n  \\\"data\\\": {\\n    \\\"errorMessage\\\": \\\"Access was denied, message: No such namespace namespaces/tech-scp-chain7.\\\",\\n    \\\"event\\\": \\\"rewrite\\\",\\n    \\\"evidence\\\": \\\"今年是2024年\\\",\\n    \\\"requestId\\\": \\\"DA2578F7-88A5-5D6E-9305-33E724E97D60\\\",\\n    \\\"rewrite\\\": \\\"查询全部关键字数据，并以饼图形式展示\\\",\\n    \\\"selector\\\": [\\n      \\\"table_name1\\\"\\n    ],\\n    \\\"sessionId\\\": \\\"sessionid1\\\",\\n    \\\"sql\\\": \\\"select p.product_id, p.product_name, sum(o.quantity) as total_sales from products p join orders o on p.product_id = o.product_id where o.order_date between '2022-10-22' and '2024-10-22' group by p.product_id, p.product_name having total_sales > 5\\\",\\n    \\\"sqlData\\\": {\\n      \\\"column\\\": [\\n        \\\"product\\\"\\n      ],\\n      \\\"data\\\": [\\n        {\\n          \\\"product_id\\\": \\\"29\\\",\\n          \\\"total_sales\\\": \\\"63\\\",\\n          \\\"product_name\\\": \\\"1L迷你电热水壶\\\"\\n        }\\n      ]\\n    },\\n    \\\"sqlError\\\": \\\"Can not issue data manipulation statements with executeQuery()\\\",\\n    \\\"visualization\\\": {\\n      \\\"data\\\": {\\n        \\\"plotType\\\": \\\"bar\\\",\\n        \\\"xAxis\\\": [\\n          \\\"product_name\\\"\\n        ],\\n        \\\"yAxis\\\": [\\n          \\\"total_sales\\\"\\n        ]\\n      },\\n      \\\"text\\\": \\\"查询结果显示，在过去两年中销量超过5的所有产品包括：2L大容量空气炸锅销售了109件，青春版运动手环销售了119件，2L大容量全自动豆浆机销售了106件，无线蓝牙耳机快充版销售了84件，2L大容量便携式榨汁机销售了136件，青春版智能手表销售了104件，挂壁式护眼台灯销售了102件，P30手机8+256G销售了83件，2L大容量电热水壶销售了84件，男士电动化妆刷套装销售了197件，旅行箱销售了82件，手链销售了101件，项链销售了84件，头饰发链销售了89件，腕表销售了98件，戒指销售了157件，真皮皮包销售了136件，风衣大衣销售了76件，运动旅行包销售了91件，丝巾销售了265件，1L迷你空气炸锅销售了85件，豪华款运动手环销售了132件，1L迷你全自动豆浆机销售了81件，豪华版无线蓝牙耳机（绿色）销售了122件，1L迷你便携式榨汁机销售了76件，豪华款智能手表销售了76件，粘贴式护眼台灯销售了109件，M60手机16+512G销售了109件，1L迷你电热水壶销售了63件，女士电动化妆刷套装销售了158件。\\\"\\n    }\\n  }\\n}\",\"type\":\"json\"}]","title":"Chat对话接口","description":"请确保在使用该接口前，已充分了解析言产品的收费方式和[价格](https://common-buy.aliyun.com/?&msctype=email&mscareaid=cn&mscsiteid=cn&mscmsgid=3800124102101018568&yunge_info=email___3800124102101018568&commodityCode=sfm_DataAnalysisGBI_public_cn)。"}},"endpoints":[{"regionId":"cn-beijing","endpoint":"dataanalysisgbi.cn-beijing.aliyuncs.com"}]}